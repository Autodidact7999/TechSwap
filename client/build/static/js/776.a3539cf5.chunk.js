"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[776],{5776:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(5043),l=a(3216),i=a(7154),n=a(7796),c=a(579);const r="https://techswap.onrender.com",d=()=>{const[e,s]=(0,t.useState)(!1),a=(0,l.Zp)(),d=(0,l.zy)(),o=new URLSearchParams(d.search),h=o.get("code"),m=o.get("email"),u=d.state?d.state:m,[g,x]=(0,t.useState)(h||""),[b,f]=(0,t.useState)(""),p=(0,t.useCallback)((()=>{s(!0),console.log("BASE_URL client:",r);const e="".concat(r,"/auth/verify?code=").concat(g,"&email=").concat(u);console.log("Verification link client:",e),i.A.get(e).then((e=>{200===e.status&&(a("/email-verified"),x(""),f(""),s(!1))})).catch((e=>{f(e.response.data.message||"Invalid code, please try again."),s(!1)}))}),[g,u,a,s,f]);return(0,t.useEffect)((()=>{h&&m&&p()}),[h,m,p]),"Email is already verified"===b&&a("/signin"),(0,c.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,c.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,c.jsxs)("div",{className:"rounded-md bg-white p-6 shadow-md",children:[(0,c.jsx)("h2",{className:"mb-4 text-2xl font-bold",children:"Verify your email address"}),!h&&!m&&(0,c.jsxs)("p",{className:"mb-4",children:["A verification code was sent to your email address. Please either",(0,c.jsx)("span",{className:"font-bold",children:" follow "}),"the link in the email or",(0,c.jsx)("span",{className:"font-bold",children:" enter "}),"the code below."]}),(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)("input",{type:"text",placeholder:"Verification code",className:"w-full rounded-lg border-2 border-gray-200 p-2",value:g,onChange:e=>{x(e.target.value)}})}),b&&(0,c.jsx)("div",{className:"mb-4 text-sm text-red-500",children:b}),(0,c.jsx)("button",{disabled:e,className:"rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",onClick:p,children:e?(0,c.jsx)(n.A,{loadingText:"Verifying..."}):"Verify"}),(0,c.jsx)("button",{className:"ml-4 rounded-lg bg-gray-300 px-4 py-2 text-gray-800 hover:bg-gray-400",onClick:()=>{a("/signup")},children:"Cancel"})]})})})}}}]);
//# sourceMappingURL=776.a3539cf5.chunk.js.map